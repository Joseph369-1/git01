<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard ‚Äì Home</title>

<style>
:root {
    --primary: #1e40af;
    --primary-light: #2563eb;
    --sidebar-bg: #1e3a8a;
    --sidebar-text: #ffffff;
    --bg: #f1f5ff;
    --card-bg: #ffffff;
    --text-dark: #1f2937;
    --text-med: #374151;
    --text-light: #6b7280;
}

.dark {
    --sidebar-bg: #0f172a;
    --sidebar-text: #e2e8f0;
    --bg: #0f172a;
    --card-bg: #1e293b;
    --text-dark: #f1f5f9;
    --text-med: #cbd5e1;
    --text-light: #94a3b8;
}

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: var(--bg);
    display: flex;
    height: 100vh;
}

/* SIDEBAR */
.sidebar {
    width: 250px;
    background: var(--sidebar-bg);
    color: var(--sidebar-text);
    padding: 20px;
    display: flex;
    flex-direction: column;
}

.user-box { text-align: center; margin-bottom: 30px; }

.avatar {
    width: 60px; height: 60px;
    background: var(--primary-light); color: white;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    margin: auto; font-size: 20px; font-weight: bold;
}

.menu { margin-top: 20px; display: flex; flex-direction: column; }
.menu a {
    color: var(--sidebar-text);
    padding: 12px;
    text-decoration: none;
    border-radius: 6px;
}
.menu a:hover { background: rgba(255,255,255,0.15); }

/* MAIN */
.content {
    flex: 1;
    padding: 25px;
    overflow-y: auto;
}

.menu-btn {
    display: none;
}

.toggle {
    float: right;
    cursor: pointer;
    background: var(--primary);
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
}

h1 { color: var(--text-dark); }

.card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    margin-top: 20px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

/* STATS */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
    gap: 15px;
}

.stat-box {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    text-align: center;
}

.stat-title { font-size: 14px; color: var(--text-light); }
.stat-value { font-size: 26px; font-weight: bold; color: var(--primary); }

/* CHARTS */
.canvas-box {
    width: 100%;
    height: 280px;
    position: relative;
}

canvas {
    width: 100%;
    height: 100%;
}

/* RESPONSIVE */
@media(max-width:780px){
    .sidebar {
        position: fixed;
        left: -260px;
        transition: .3s;
        z-index: 4;
    }
    .sidebar.show { left: 0; }
    .menu-btn {
        display: inline-block;
        background: var(--primary);
        color: white;
        padding: 10px 15px;
        border-radius: 6px;
        margin-bottom: 15px;
        cursor: pointer;
    }
}
</style>
</head>

<body id="body">

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
    <div class="user-box">
        <div class="avatar" id="avatar"></div>
        <div id="username"></div>
        <div style="font-size:13px;opacity:0.8;" id="useremail"></div>
    </div>

    <div class="menu">
        <a href="homepage.html">Dashboard</a>
        <a href="members.html">Member Registration</a>
        <a href="payments.html">Payments</a>
        <a href="#" onclick="logout()">Logout</a>
    </div>
</div>

<!-- MAIN CONTENT -->
<div class="content">

    <div class="menu-btn" onclick="toggleSidebar()">‚ò∞ Menu</div>
    <span class="toggle" onclick="toggleDark()">üåô / ‚òÄÔ∏è</span>

    <h1>Dashboard</h1>

    <!-- STATISTICS -->
    <div class="stats-grid" id="statsGrid"></div>

    
    </div>

    
    </div>

</div>

<script>
/* LOAD USER */
let user = JSON.parse(localStorage.getItem("user"));
if (!localStorage.getItem("loggedIn") || !user){
    window.location.href = "login.html";
}
document.getElementById("username").textContent = user.name;
document.getElementById("useremail").textContent = user.email;
document.getElementById("avatar").textContent = user.initials;

/* DARK MODE */
if (localStorage.getItem("darkMode") === "true"){
    document.getElementById("body").classList.add("dark");
}
function toggleDark(){
    let b = document.getElementById("body");
    b.classList.toggle("dark");
    localStorage.setItem("darkMode", b.classList.contains("dark"));
}

/* SIDEBAR MOBILE */
function toggleSidebar(){
    document.getElementById("sidebar").classList.toggle("show");
}

/* STATS */
function loadStats(){
    let members = JSON.parse(localStorage.getItem("members") || "[]");
    let payments = JSON.parse(localStorage.getItem("payments") || "[]");

    let momo = payments.filter(p=>p.type==="Momo").length;
    let card = payments.filter(p=>p.type==="Card").length;
    let bank = payments.filter(p=>p.type==="Bank").length;

    let cash = payments.filter(p=>p.mode==="Cash").length;
    let transfer = payments.filter(p=>p.mode==="Transfer").length;

    document.getElementById("statsGrid").innerHTML = `
        <div class="stat-box">
            <div class="stat-title">Total Members</div>
            <div class="stat-value">${members.length}</div>
        </div>

        <div class="stat-box">
            <div class="stat-title">Total Payments</div>
            <div class="stat-value">${payments.length}</div>
        </div>

        <div class="stat-box">
            <div class="stat-title">Cash Payments</div>
            <div class="stat-value">${cash}</div>
        </div>

        <div class="stat-box">
            <div class="stat-title">Transfers</div>
            <div class="stat-value">${transfer}</div>
        </div>

        <div class="stat-box">
            <div class="stat-title">Momo</div>
            <div class="stat-value">${momo}</div>
        </div>

        <div class="stat-box">
            <div class="stat-title">Card</div>
            <div class="stat-value">${card}</div>
        </div>

        <div class="stat-box">
            <div class="stat-title">Bank</div>
            <div class="stat-value">${bank}</div>
        </div>
    `;
}

/* SIMPLE CHART ENGINE (PURE JS) */
function drawChart(canvasId, values, color){
    let c = document.getElementById(canvasId);
    let ctx = c.getContext("2d");

    let w = c.width = c.offsetWidth;
    let h = c.height = c.offsetHeight;

    ctx.clearRect(0,0,w,h);

    let max = Math.max(...values) || 1;
    let step = w / (values.length - 1);

    ctx.lineWidth = 3;
    ctx.strokeStyle = color;
    ctx.beginPath();

    values.forEach((val,i)=>{
        let x = i*step;
        let y = h - (val/max)*h + 5;
        if(i===0) ctx.moveTo(x,y);
        else ctx.lineTo(x,y);
    });

    ctx.stroke();
}

/* CHART DATA */
function loadCharts(){




   
}

loadStats();


/* LOGOUT */
function logout(){
    localStorage.setItem("loggedIn","false");
    location.href = "login.html";
}
</script>

</body>
</html>